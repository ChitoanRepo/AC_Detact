This project using STM32F103 to detect AC input power with opto PC817 detect AC on half-wave.

On version one im try to detect on AVR atmeta328 IC
On second version i'm using arm IC.
